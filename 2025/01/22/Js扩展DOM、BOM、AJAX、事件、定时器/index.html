<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>syight主题</title>
    
<link rel="stylesheet" href="/css/style.css">

    
        <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/highlight.js/11.11.1/styles/github-dark.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/languages/go.min.js"></script>
        <script>hljs.highlightAll();</script>
    
<meta name="generator" content="Hexo 7.3.0"></head>
<body>
    <div id="header">
    <ul>
        
            <li><a href="/">
                首页
            </a></li>
        
            <li><a href="/archives">
                归档
            </a></li>
        
    </ul>
</div>
    <div id="header-placeHolder-box"></div>
    <!-- TODO: 添加文章目录 -->
<div id="post">
    <div id="post-title">
    <div id="title">Js扩展DOM、BOM、AJAX、事件、定时器</div>
    <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>
</div>
    <div id="article-container">
        <h1 id="BOM-操作"><a href="#BOM-操作" class="headerlink" title="BOM 操作"></a>BOM 操作</h1><p><code>BOM</code>指的是浏览器对象模型：<code>Browser Object Mode</code>，通过操作 <code>window</code> 对象的属性和方法来实现与浏览器的交互。</p>
<p><code>BOM</code>的构成如下图所示：</p>
<p><img src="https://doc.shiyanlou.com/courses/4385/1347963/934aa25def575c514b29c151a0cab411-0" alt="图片描述"></p>
<p>其中，<code>window</code>对象是顶级对象，在 <code>window</code> 对象下面有一些重要的属性：</p>
<ul>
<li><p><code>document</code>：DOM 对象。</p>
</li>
<li><p><code>location</code>：用于获取或设置文档当前 URL 的位置。</p>
</li>
<li><p><code>navigation</code>：包含浏览器配置相关的信息。</p>
</li>
<li><p><code>history</code>：用于操作浏览器的历史记录。</p>
</li>
<li><p><code>screen</code>：用于获取屏幕设备信息。</p>
<h2 id="用户操作"><a href="#用户操作" class="headerlink" title="用户操作"></a>用户操作</h2><p>警告框：</p>
<pre><code class="highlight js"><span class="title function_">alert</span>(message)</code></pre>

<p>对话框：</p>
<pre><code class="highlight js"><span class="keyword">const</span> res = <span class="title function_">confirm</span>(message)	<span class="comment">// 根据用户点击确定或取消结果：true或者false</span></code></pre>

<p>弹出输入对话框（<code>defaultValue</code>为默认值占位值，可选）：</p>
<pre><code class="highlight js"><span class="title function_">prompt</span>(message, defaultValue)	<span class="comment">// 返回值为用户的输入文本</span>

<span class="comment">// 参考实例</span>
<span class="keyword">const</span> res = <span class="title function_">prompt</span>(<span class="string">&#x27;请输入姓名：&#x27;</span>, <span class="string">&#x27;Alice&#x27;</span>)
<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;用户的输入结果：&#x27;</span>, res)</code></pre></li>
</ul>
<h2 id="获取窗口尺寸"><a href="#获取窗口尺寸" class="headerlink" title="获取窗口尺寸"></a>获取窗口尺寸</h2><p><code>window</code> 对象包含一些存储窗口尺寸的<strong>只读属性</strong>：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描 述</th>
</tr>
</thead>
<tbody><tr>
<td><code>innerWidth</code></td>
<td>窗口的内部宽度</td>
</tr>
<tr>
<td><code>innerHeight</code></td>
<td>窗口的内部高度</td>
</tr>
<tr>
<td><code>outerWidth</code></td>
<td>整个浏览器窗口的宽度</td>
</tr>
<tr>
<td><code>outerHeight</code></td>
<td>整个浏览器窗口的高度</td>
</tr>
</tbody></table>
<p>参考用例：</p>
<pre><code class="highlight js"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;窗口的内部宽度：&#x27;</span>, innerWidth)	<span class="comment">// 1797</span>
<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;窗口的内部高度：&#x27;</span>, innerHeight) <span class="comment">// 889</span>
<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;整个浏览器窗口的宽度：&#x27;</span>, outerWidth) <span class="comment">// 1797</span>
<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;整个浏览器窗口的高度：&#x27;</span>, outerHeight) <span class="comment">// 976</span></code></pre>

<h2 id="获取屏幕尺寸"><a href="#获取屏幕尺寸" class="headerlink" title="获取屏幕尺寸"></a>获取屏幕尺寸</h2><p>访问 <code>window</code> 对象的 <code>screen</code> 属性会返回一个 <code>Screen</code> 对象，它包含一些屏幕尺寸相关的<strong>只读属性</strong>：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描 述</th>
</tr>
</thead>
<tbody><tr>
<td><code>screen.width</code></td>
<td>屏幕的宽度</td>
</tr>
<tr>
<td><code>screen.height</code></td>
<td>屏幕的高度</td>
</tr>
<tr>
<td><code>screen.availWidth</code></td>
<td>屏幕上可用的宽度</td>
</tr>
<tr>
<td><code>screen.availHeight</code></td>
<td>屏幕上可用的高度（不包括任务栏）</td>
</tr>
</tbody></table>
<p>参考实例：</p>
<pre><code class="highlight js"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;屏幕的宽度：&#x27;</span>, screen.<span class="property">width</span>)	<span class="comment">// 1797</span>
<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;屏幕的高度：&#x27;</span>, screen.<span class="property">height</span>) <span class="comment">// 1011</span>
<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;屏幕上可用的宽度：&#x27;</span>, screen.<span class="property">availWidth</span>) <span class="comment">// 1797</span>
<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;屏幕上可用的高度：&#x27;</span>, screen.<span class="property">availHeight</span>) <span class="comment">// 976</span></code></pre>

<h2 id="Location-对象"><a href="#Location-对象" class="headerlink" title="Location 对象"></a>Location 对象</h2><p>访问 <code>window</code> 对象的 <code>location</code> 属性会返回一个 <code>Location</code> 对象，它包含有关文档当前 URL 位置的信息。</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描 述</th>
</tr>
</thead>
<tbody><tr>
<td><code>location.href</code></td>
<td>包含整个 URL 的字符串</td>
</tr>
<tr>
<td><code>location.protocol</code></td>
<td>包含 URL 协议方案的字符串</td>
</tr>
<tr>
<td><code>location.hostname</code></td>
<td>包含 URL 域名的字符串</td>
</tr>
<tr>
<td><code>location.pathname</code></td>
<td>包含开头的 <code>/</code> 后跟 URL 路径的字符串</td>
</tr>
<tr>
<td><code>location.search</code></td>
<td>包含开头的 <code>?</code> 后跟 URL 的“查询字符串”</td>
</tr>
<tr>
<td><code>location.hash</code></td>
<td>包含开头的 <code>#</code> 后跟 URL 的片段标识符</td>
</tr>
</tbody></table>
<p>参考用例：</p>
<pre><code class="highlight js"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;整个 URL：&#x27;</span>, location.<span class="property">href</span>)
<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;URL 协议：&#x27;</span>, location.<span class="property">protocol</span>)
<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;URL 域名：&#x27;</span>, location.<span class="property">hostname</span>)
<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;URL 路径：&#x27;</span>, location.<span class="property">pathname</span>)</code></pre>

<p>此外，<code>Location</code> 对象还包含对 URL 进行操作的方法。</p>
<p>其中，<code>assign()</code> 方法可以使浏览器加载并显示指定 URL 处的页面：</p>
<pre><code class="highlight js">location.<span class="title function_">assign</span>(url)</code></pre>

<p><code>reload()</code> 方法会重新加载当前 URL，就像点击了刷新按钮一样。</p>
<pre><code class="highlight js">location.<span class="title function_">reload</span>()</code></pre>

<h2 id="History-对象"><a href="#History-对象" class="headerlink" title="History 对象"></a>History 对象</h2><p>访问 <code>window</code> 对象的 <code>history</code> 属性会返回一个 <code>History</code> 对象，可以通过它操作浏览器的历史记录。</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>描 述</th>
</tr>
</thead>
<tbody><tr>
<td><code>location.go()</code></td>
<td>移动到历史记录中相对于当前页面的位置，例如 <code>-1</code> 表示上一页，<code>1</code> 表示下一页。参数为 <code>0</code> 则会重新加载当前页面。</td>
</tr>
<tr>
<td><code>location.back()</code></td>
<td>转到历史记录中的上一页，相当于点击浏览器的“后退”按钮</td>
</tr>
<tr>
<td><code>location.forward()</code></td>
<td>转到历史记录中的下一页，相当于点击浏览器的“前进”按钮</td>
</tr>
<tr>
<td><code>location.pushState()</code></td>
<td>向浏览器的历史记录中添加一个条目</td>
</tr>
<tr>
<td><code>location.replaceState()</code></td>
<td>修改当前历史记录条目</td>
</tr>
</tbody></table>
<h1 id="DOM-操作"><a href="#DOM-操作" class="headerlink" title="DOM 操作"></a>DOM 操作</h1><p>DOM 的英文全称为 <strong>Document Object Model</strong>（文档对象模型），它是浏览器为每个窗口内的 HTML 页面在内存中创建的表示文档的结构。通过 DOM，我们可以使用 JavaScript 来对页面中的元素进行操作。</p>
<h2 id="常用的-DOM-属性"><a href="#常用的-DOM-属性" class="headerlink" title="常用的 DOM 属性"></a>常用的 DOM 属性</h2><p>常用的 DOM 属性如下表所示：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描 述</th>
</tr>
</thead>
<tbody><tr>
<td><code>document.title</code></td>
<td>获取文档的标题文本</td>
</tr>
<tr>
<td><code>document.URL</code></td>
<td>获取文档的 URL</td>
</tr>
<tr>
<td><code>document.head</code></td>
<td>获取文档的 <code>&lt;head&gt;</code> 元素</td>
</tr>
<tr>
<td><code>document.body</code></td>
<td>获取文档的 <code>&lt;body&gt;</code> 元素</td>
</tr>
<tr>
<td><code>document.forms</code></td>
<td>获取文档的 <code>&lt;form&gt;</code> 元素列表</td>
</tr>
<tr>
<td><code>document.images</code></td>
<td>获取文档的 <code>&lt;img&gt;</code> 元素列表</td>
</tr>
<tr>
<td><code>document.links</code></td>
<td>获取文档的 <code>&lt;a&gt;</code> 元素列表</td>
</tr>
<tr>
<td><code>document.scripts</code></td>
<td>获取文档的 <code>&lt;script&gt;</code> 元素列表</td>
</tr>
</tbody></table>
<h2 id="常用的-DOM-方法"><a href="#常用的-DOM-方法" class="headerlink" title="常用的 DOM 方法"></a>常用的 DOM 方法</h2><p>我们可以使用下面这些方法从当前文档中获取元素节点：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>描 述</th>
</tr>
</thead>
<tbody><tr>
<td><code>document.getElementById()</code></td>
<td>通过 <code>id</code> 属性获取元素</td>
</tr>
<tr>
<td><code>document.getElementsByClassName()</code></td>
<td>通过 <code>class</code> 属性获取元素列表</td>
</tr>
<tr>
<td><code>document.getElementsByTagName()</code></td>
<td>通过标签名获取元素列表</td>
</tr>
<tr>
<td><code>document.getElementsByName()</code></td>
<td>通过 <code>name</code> 属性获取元素列表</td>
</tr>
<tr>
<td><code>document.querySelector()</code></td>
<td>通过选择器获取第一个匹配的元素</td>
</tr>
<tr>
<td><code>document.querySelectorAll()</code></td>
<td>通过选择器获取所有匹配的元素列表</td>
</tr>
</tbody></table>
<p>除了获取已有的元素节点，我们还可以使用下面这些方法创建新节点：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>描 述</th>
</tr>
</thead>
<tbody><tr>
<td><code>document.createElement()</code></td>
<td>创建元素节点</td>
</tr>
<tr>
<td><code>document.createTextNode()</code></td>
<td>创建文本节点</td>
</tr>
</tbody></table>
<h2 id="基本-DOM-操作"><a href="#基本-DOM-操作" class="headerlink" title="基本 DOM 操作"></a>基本 DOM 操作</h2><p>常用的元素节点属性如下表所示：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>描 述</th>
</tr>
</thead>
<tbody><tr>
<td><code>parentElement</code></td>
<td>获取父级元素</td>
</tr>
<tr>
<td><code>previousElementSibling</code></td>
<td>获取同级的前一个元素</td>
</tr>
<tr>
<td><code>nextElementSibling</code></td>
<td>获取同级的后一个元素</td>
</tr>
<tr>
<td><code>children</code></td>
<td>获取子级元素列表</td>
</tr>
<tr>
<td><code>firstElementChild</code></td>
<td>获取第一个子级元素</td>
</tr>
<tr>
<td><code>lastElementChild</code></td>
<td>获取最后一个子级元素</td>
</tr>
</tbody></table>
<p>常用的元素节点方法如下表所示：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>描 述</th>
</tr>
</thead>
<tbody><tr>
<td><code>cloneNode()</code></td>
<td>返回当前节点的副本（如果传入一个参数 <code>true</code> 则连同后代节点一起复制）</td>
</tr>
<tr>
<td><code>remove()</code></td>
<td>删除当前节点本身</td>
</tr>
<tr>
<td><code>removeChild(node)</code></td>
<td>从当前节点的子级列表中删除子级节点 <code>node</code></td>
</tr>
<tr>
<td><code>replaceWith(node1, node2, ...)</code></td>
<td>将当前节点替换为一组其它节点或文本</td>
</tr>
<tr>
<td><code>prepend(node1, node2, ...)</code></td>
<td>在当前节点的子级列表开头添加一组新的<strong>子级</strong>节点或文本</td>
</tr>
<tr>
<td><code>append(node1, node2, ...)</code></td>
<td>在当前节点的子级列表末尾添加一组新的<strong>子级</strong>节点或文本</td>
</tr>
<tr>
<td><code>before(node1, node2, ...)</code></td>
<td>在当前节点的前面添加一组新的<strong>同级</strong>节点或文本</td>
</tr>
<tr>
<td><code>after(node1, node2, ...)</code></td>
<td>在当前节点的后面添加一组新的<strong>同级</strong>节点或文本</td>
</tr>
<tr>
<td><code>insertBefore(node, reference)</code></td>
<td>在子级节点 <code>reference</code> 的前面插入一个新节点 <code>node</code></td>
</tr>
</tbody></table>
<p>元素节点的方法参考以下示例：</p>
<p>在这个示例中：</p>
<ol>
<li>使用 <code>remove()</code> 方法删除了 <code>id=&quot;js&quot;</code> 的 <code>&lt;li&gt;</code> 元素。</li>
<li>创建了一个新的 <code>&lt;li&gt;</code> 元素，并插入到 <code>id=&quot;css&quot;</code> 的 <code>&lt;li&gt;</code> 元素的前面。</li>
<li>在 <code>&lt;h2&gt;</code> 元素的前面添加了一行文本。</li>
<li>将 <code>&lt;h2&gt;</code> 元素复制，并添加到 <code>&lt;body&gt;</code> 元素内部的末尾位置。</li>
</ol>
<pre><code class="highlight html"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span>
<span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span>
  <span class="tag">&lt;<span class="name">head</span>&gt;</span>
    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span>
    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span>
    <span class="tag">&lt;<span class="name">title</span>&gt;</span>文档<span class="tag">&lt;/<span class="name">title</span>&gt;</span>
  <span class="tag">&lt;/<span class="name">head</span>&gt;</span>
  <span class="tag">&lt;<span class="name">body</span>&gt;</span>
    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Web 开发三剑客<span class="tag">&lt;/<span class="name">h2</span>&gt;</span>
    <span class="tag">&lt;<span class="name">ul</span>&gt;</span>
      <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;html&quot;</span>&gt;</span>HTML<span class="tag">&lt;/<span class="name">li</span>&gt;</span>
      <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;css&quot;</span>&gt;</span>CSS<span class="tag">&lt;/<span class="name">li</span>&gt;</span>
      <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&quot;js&quot;</span>&gt;</span>JavaScript<span class="tag">&lt;/<span class="name">li</span>&gt;</span>
    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span>
    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript">      <span class="comment">// 删除元素节点</span></span>
<span class="language-javascript">      <span class="keyword">const</span> js = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;js&#x27;</span>)</span>
<span class="language-javascript">      js.<span class="title function_">remove</span>()</span>
<span class="language-javascript"></span>
<span class="language-javascript">      <span class="comment">// 创建元素节点</span></span>
<span class="language-javascript">      <span class="keyword">const</span> es = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;LI&#x27;</span>)</span>
<span class="language-javascript">      es.<span class="title function_">prepend</span>(<span class="string">&#x27;ES6&#x27;</span>)</span>
<span class="language-javascript"></span>
<span class="language-javascript">      <span class="comment">// 插入新节点</span></span>
<span class="language-javascript">      <span class="keyword">const</span> ul = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;ul&#x27;</span>)[<span class="number">0</span>]</span>
<span class="language-javascript">      <span class="keyword">const</span> css = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;css&#x27;</span>)</span>
<span class="language-javascript">      ul.<span class="title function_">insertBefore</span>(es, css)</span>
<span class="language-javascript"></span>
<span class="language-javascript">      <span class="comment">// 在节点的前面添加文本</span></span>
<span class="language-javascript">      <span class="keyword">const</span> h2 = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;h2&#x27;</span>)[<span class="number">0</span>]</span>
<span class="language-javascript">      h2.<span class="title function_">before</span>(<span class="string">&#x27;Vue 是一套用于构建用户界面的渐进式框架。&#x27;</span>)</span>
<span class="language-javascript"></span>
<span class="language-javascript">      <span class="comment">// 复制节点并在 body 中添加</span></span>
<span class="language-javascript">      <span class="keyword">const</span> clone = h2.<span class="title function_">cloneNode</span>(<span class="literal">true</span>)</span>
<span class="language-javascript">      <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">append</span>(clone)</span>
<span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>
  <span class="tag">&lt;/<span class="name">body</span>&gt;</span>
<span class="tag">&lt;/<span class="name">html</span>&gt;</span></code></pre>

<p>预览效果：</p>
<p><img src="https://doc.shiyanlou.com/courses/uid1889095-20240927-1727431411923" alt="图片描述"></p>
<h1 id="定时器"><a href="#定时器" class="headerlink" title="定时器"></a>定时器</h1><p><code>js</code>中定时器有一次性定时器和重复执行定时器。</p>
<h2 id="一次性定时器"><a href="#一次性定时器" class="headerlink" title="一次性定时器"></a>一次性定时器</h2><p>全局 <code>setTimeout()</code> 函数设置一个定时器，一旦倒计时完成，就会执行一段指定的代码。</p>
<blockquote>
<p>需要注意，定时器函数一般为异步函数。</p>
</blockquote>
<p>设置定时器的方法如下：</p>
<pre><code class="highlight js"><span class="comment">// 使用格式：</span>
<span class="built_in">setTimeout</span>(functionRef, delay, param1, param2, <span class="comment">/* …, */</span> paramN)

<span class="comment">// 参考示例：</span>
<span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;
  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;延迟一秒&#x27;</span>)
&#125;, <span class="number">1000</span>)
<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;其他代码&#x27;</span>)</code></pre>

<p><code>setTimeout()</code> 函数的返回值是一个正整数值，它代表了这个定时器的 ID。我们可以将这个值传递给 <code>clearTimeout()</code> 函数以取消定时。</p>
<pre><code class="highlight js"><span class="comment">// 参考示例：</span>
<span class="keyword">const</span> timer1 = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;
  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;延迟一秒&#x27;</span>)
&#125;, <span class="number">1000</span>)
<span class="keyword">const</span> timer2 = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;
  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;延迟两秒&#x27;</span>)
&#125;, <span class="number">2000</span>)
<span class="keyword">const</span> timer3 = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;
  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;延迟三秒&#x27;</span>)
&#125;, <span class="number">3000</span>)
<span class="comment">// 取消第二个定时器</span>
<span class="built_in">clearTimeout</span>(timer2)</code></pre>

<h2 id="重复定时器"><a href="#重复定时器" class="headerlink" title="重复定时器"></a>重复定时器</h2><p>全局 <code>setInterval()</code> 函数设置一个定时器，用于重复执行一段指定的代码，每次执行之间有固定的时间间隔。</p>
<p>其使用格式如下：</p>
<pre><code class="highlight js"><span class="comment">// 使用方法：</span>
<span class="built_in">setInterval</span>(functionRef, delay, param1, param2, <span class="comment">/* …, */</span> paramN)

<span class="comment">// 参考示例：</span>
<span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;
  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;重复执行&#x27;</span>)
&#125;, <span class="number">1000</span>)
<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;其他代码&#x27;</span>)</code></pre>

<h1 id="本地存储"><a href="#本地存储" class="headerlink" title="本地存储"></a>本地存储</h1><p>本地存储是指在客户端存储数据。HTML5 为我们提供了两种 API，分别是 <code>localStorage</code> 与 <code>sessionStorage</code>。二者的使用方法类似，都可以用来存储客户端临时信息，并且二者存储的数据格式均为 key&#x2F;value 对的形式。</p>
<h2 id="localStorage-API"><a href="#localStorage-API" class="headerlink" title="localStorage API"></a>localStorage API</h2><p><code>localStorage</code> 对象是 HTML 5 新增的特性，主要用于本地存储。</p>
<p>在网络发展的早期，当没有其他选择时，<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies">cookie</a> 被用于一般客户端数据存储目的。而在现在，更加推荐使用 <code>localStorage</code> 等现代存储 API。</p>
<p><code>localstorage</code> 与 <code>cookie</code> 主要有以下区别：</p>
<ul>
<li><code>localStorage</code> 解决了早期使用 <code>cookie</code> 存储遇到的存储空间不足的问题( 每条 <code>cookie</code> 的存储空间为 4k )</li>
<li><code>localStorage</code> 一般浏览器支持的是 5M 大小，具体存储大小根据浏览器的不同会有所不同。</li>
<li>相较于 <code>cookie</code> 而言，<code>localStorage</code> 中的信息不会被传输到服务器。</li>
</ul>
<p><code>localStorage</code> 对象提供的方法如下：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>setItem(key, value)</code></td>
<td>保存数据到本地存储</td>
</tr>
<tr>
<td><code>getItem(key)</code></td>
<td>根据指定 <code>key</code> 从本地存储中获取数据</td>
</tr>
<tr>
<td><code>removeItem(key)</code></td>
<td>根据指定 <code>key</code> 从本地存储中移除数据</td>
</tr>
<tr>
<td><code>clear()</code></td>
<td>清除所有保存数据</td>
</tr>
</tbody></table>
<h3 id="存储数据"><a href="#存储数据" class="headerlink" title="存储数据"></a>存储数据</h3><pre><code class="highlight js"><span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(key, value)	<span class="comment">// 方法一</span>
<span class="variable language_">localStorage</span>.<span class="property">key</span> = value	<span class="comment">// 方法二，和方法一效果一样</span></code></pre>

<h3 id="读取数据"><a href="#读取数据" class="headerlink" title="读取数据"></a>读取数据</h3><pre><code class="highlight js"><span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(key)	<span class="comment">// 方法一</span>
<span class="variable language_">localStorage</span>.<span class="property">key</span>	<span class="comment">// 方法二，等效于前者</span></code></pre>



<h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3><pre><code class="highlight js"><span class="comment">// 根据指定名称从本地存储中移除</span>
<span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(key)</code></pre>

<blockquote>
<p>上面的<code>key</code>一般是一个字符串。</p>
</blockquote>
<h3 id="清空数据"><a href="#清空数据" class="headerlink" title="清空数据"></a>清空数据</h3><pre><code class="highlight js"><span class="comment">// 清除本地存储中所有数据</span>
<span class="variable language_">localStorage</span>.<span class="title function_">clear</span>()</code></pre>

<h2 id="sessionStorage-API"><a href="#sessionStorage-API" class="headerlink" title="sessionStorage API"></a>sessionStorage API</h2><p><code>localStorage</code> 和 <code>sessionStorage</code> 对象作为 HTML5 新增的特性，都可以用来存储客户端临时信息，并且二者存储的数据格式均为 key&#x2F;value 键值对数据。</p>
<p><code>sessionStorage</code> 对象提供的方法与 <code>localStorage</code> 对象相同，具体如下：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>setItem(key, value)</code></td>
<td>保存数据到本地存储</td>
</tr>
<tr>
<td><code>getItem(key)</code></td>
<td>根据指定 <code>key</code> 从本地存储中获取数据</td>
</tr>
<tr>
<td><code>removeItem(key)</code></td>
<td>根据指定 <code>key</code> 从本地存储中移除数据</td>
</tr>
<tr>
<td><code>clear()</code></td>
<td>清除所有保存数据</td>
</tr>
</tbody></table>
<p>那么<code>localStorage</code> 和 <code>sessionStorage</code> 二者有什么区别呢？</p>
<p>它们的区别在于：</p>
<ul>
<li><code>localStorage</code> 的生命周期是永久的，除非用户清除 <code>localStorage</code> 信息，否则这些信息将永远存在。</li>
<li><code>sessionStorage</code> 的生命周期是临时的，一旦当前窗口或标签页被关闭了，那么通过它存储的数据也就被清空了。</li>
</ul>
<p>由于具体的调用方法和<code>localStorage</code>完全一致，使用方法这里省略。</p>
<h1 id="事件处理"><a href="#事件处理" class="headerlink" title="事件处理"></a>事件处理</h1><p>事件是指用户进行了某些操作时触发的“信号”，例如点击鼠标、按下键盘、输入文字等。我们可以绑定相应的事件处理函数来进行处理。</p>
<ul>
<li>DOM 0 级事件与 DOM 2 级事件</li>
<li>鼠标事件</li>
<li>键盘事件</li>
<li>表单事件</li>
<li>事件对象</li>
</ul>
<h2 id="DOM-0-级事件"><a href="#DOM-0-级事件" class="headerlink" title="DOM 0 级事件"></a>DOM 0 级事件</h2><p>DOM 0 级事件是直接使用 HTML 属性或 DOM 对象属性来指定相应的事件处理函数。例如，<code>click</code> 是当鼠标点击时会触发的事件。我们可以在 HTML 标签里直接写 <code>onclick</code> 属性或者在 JavaScript 中使用 <code>onclick = function()&#123;&#125;</code>。</p>
<p>直接将节点的<code>onclick</code>绑定为一个函数，点击事件就只能执行一个函数。但如果添加事件监听，就能同时执行多个事件所绑定的函数。</p>
<pre><code class="highlight html">// 直接绑定
<span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span>
<span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span>
  <span class="tag">&lt;<span class="name">head</span>&gt;</span>
    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span>
    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span>
    <span class="tag">&lt;<span class="name">title</span>&gt;</span>文档<span class="tag">&lt;/<span class="name">title</span>&gt;</span>
  <span class="tag">&lt;/<span class="name">head</span>&gt;</span>
  <span class="tag">&lt;<span class="name">body</span>&gt;</span>
    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;按钮&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;alert(&#x27;欢迎来到蓝桥云课&#x27;)&quot;</span> /&gt;</span>
    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript">      <span class="keyword">const</span> el = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn&#x27;</span>)</span>
<span class="language-javascript">      el.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span>
<span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&#x27;你好！蓝桥&#x27;</span>)</span>
<span class="language-javascript">      &#125;</span>
<span class="language-javascript">      el.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span>
<span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&#x27;嗨！蓝桥&#x27;</span>)</span>
<span class="language-javascript">      &#125;	<span class="comment">// 再次绑定就会被覆盖</span></span>
<span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>
  <span class="tag">&lt;/<span class="name">body</span>&gt;</span>
<span class="tag">&lt;/<span class="name">html</span>&gt;</span></code></pre>

<h2 id="DOM-2-级事件"><a href="#DOM-2-级事件" class="headerlink" title="DOM 2 级事件"></a>DOM 2 级事件</h2><p>DOM 2 级事件可以绑定多个事件处理函数。所有的 DOM 节点都有两个方法，分别是 <code>addEvenetListener()</code> 和 <code>removeEventListener()</code>。</p>
<p>语法格式：</p>
<pre><code class="highlight js">target.<span class="title function_">addEvenetListener</span>(type, listener) <span class="comment">// 添加事件</span>
target.<span class="title function_">removeEventListener</span>(type, listener) <span class="comment">// 移出事件</span></code></pre>

<p><code>listener</code>是一个函数，如果要移除他需要保证<code>removeEventListener</code> 中传入的是同一个函数名。</p>
<pre><code class="highlight html"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span>
<span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span>
  <span class="tag">&lt;<span class="name">head</span>&gt;</span>
    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span>
    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span>
    <span class="tag">&lt;<span class="name">title</span>&gt;</span>文档<span class="tag">&lt;/<span class="name">title</span>&gt;</span>
  <span class="tag">&lt;/<span class="name">head</span>&gt;</span>
  <span class="tag">&lt;<span class="name">body</span>&gt;</span>
    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;按钮&quot;</span> /&gt;</span>
    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript">      <span class="keyword">const</span> btn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn&#x27;</span>)</span>
<span class="language-javascript">      btn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, handler)</span>
<span class="language-javascript">      <span class="keyword">function</span> <span class="title function_">handler</span>(<span class="params"></span>) &#123;</span>
<span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&#x27;已点击&#x27;</span>)</span>
<span class="language-javascript">        btn.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;click&#x27;</span>, handler)</span>
<span class="language-javascript">      &#125;</span>
<span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>
  <span class="tag">&lt;/<span class="name">body</span>&gt;</span>
<span class="tag">&lt;/<span class="name">html</span>&gt;</span></code></pre>

<p>执行后的效果如下：</p>
<p><img src="https://doc.shiyanlou.com/courses/uid1889095-20240925-1727269675625" alt="图片描述"></p>
<h2 id="鼠标事件"><a href="#鼠标事件" class="headerlink" title="鼠标事件"></a>鼠标事件</h2><p>常用的鼠标事件如下表所示：</p>
<table>
<thead>
<tr>
<th>事件</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>click</code></td>
<td>鼠标点击事件</td>
</tr>
<tr>
<td><code>mousedown</code></td>
<td>鼠标按下事件</td>
</tr>
<tr>
<td><code>mouseup</code></td>
<td>鼠标松开事件</td>
</tr>
<tr>
<td><code>mouseover</code></td>
<td>鼠标移入事件</td>
</tr>
<tr>
<td><code>mouseout</code></td>
<td>鼠标移出事件</td>
</tr>
<tr>
<td><code>mousemove</code></td>
<td>鼠标移动事件</td>
</tr>
</tbody></table>
<h3 id="click-事件"><a href="#click-事件" class="headerlink" title="click 事件"></a><code>click</code> 事件</h3><pre><code class="highlight html"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span>
<span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span>
  <span class="tag">&lt;<span class="name">head</span>&gt;</span>
    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span>
    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span>
    <span class="tag">&lt;<span class="name">title</span>&gt;</span>文档<span class="tag">&lt;/<span class="name">title</span>&gt;</span>
    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span>
<span class="language-css">      <span class="selector-tag">div</span> &#123;</span>
<span class="language-css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span>
<span class="language-css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span>
<span class="language-css">        <span class="attribute">background-color</span>: <span class="number">#b8b5ff</span>;</span>
<span class="language-css">      &#125;</span>
<span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span>
  <span class="tag">&lt;/<span class="name">head</span>&gt;</span>
  <span class="tag">&lt;<span class="name">body</span>&gt;</span>
    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>
    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript">      <span class="keyword">const</span> el = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;item&#x27;</span>)</span>
<span class="language-javascript">      <span class="comment">// 鼠标点击</span></span>
<span class="language-javascript">      el.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span>
<span class="language-javascript">        el.<span class="property">style</span>.<span class="property">background</span> = <span class="string">&#x27;#ffefa1&#x27;</span></span>
<span class="language-javascript">      &#125;)</span>
<span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>
  <span class="tag">&lt;/<span class="name">body</span>&gt;</span>
<span class="tag">&lt;/<span class="name">html</span>&gt;</span></code></pre>



<h3 id="mousedown、mouseup-事件"><a href="#mousedown、mouseup-事件" class="headerlink" title="mousedown、mouseup 事件"></a><code>mousedown</code>、<code>mouseup</code> 事件</h3><pre><code class="highlight html"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span>
<span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span>
  <span class="tag">&lt;<span class="name">head</span>&gt;</span>
    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span>
    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span>
    <span class="tag">&lt;<span class="name">title</span>&gt;</span>文档<span class="tag">&lt;/<span class="name">title</span>&gt;</span>
    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span>
<span class="language-css">      <span class="selector-tag">div</span> &#123;</span>
<span class="language-css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span>
<span class="language-css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span>
<span class="language-css">        <span class="attribute">background-color</span>: <span class="number">#b8b5ff</span>;</span>
<span class="language-css">      &#125;</span>
<span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span>
  <span class="tag">&lt;/<span class="name">head</span>&gt;</span>
  <span class="tag">&lt;<span class="name">body</span>&gt;</span>
    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>
    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript">      <span class="keyword">const</span> el = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;item&#x27;</span>)</span>
<span class="language-javascript">      <span class="comment">// 鼠标按下</span></span>
<span class="language-javascript">      el.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mousedown&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span>
<span class="language-javascript">        el.<span class="property">style</span>.<span class="property">background</span> = <span class="string">&#x27;#ffefa1&#x27;</span></span>
<span class="language-javascript">      &#125;)</span>
<span class="language-javascript">      <span class="comment">// 鼠标松开</span></span>
<span class="language-javascript">      el.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mouseup&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span>
<span class="language-javascript">        el.<span class="property">style</span>.<span class="property">background</span> = <span class="string">&#x27;#b8b5ff&#x27;</span></span>
<span class="language-javascript">      &#125;)</span>
<span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>
  <span class="tag">&lt;/<span class="name">body</span>&gt;</span>
<span class="tag">&lt;/<span class="name">html</span>&gt;</span></code></pre>

<h3 id="mouseover、mouseout-事件"><a href="#mouseover、mouseout-事件" class="headerlink" title="mouseover、mouseout 事件"></a><code>mouseover</code>、<code>mouseout</code> 事件</h3><pre><code class="highlight js">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;
<span class="language-xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span></span>
<span class="language-xml">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span>
<span class="language-xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span>
<span class="language-xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span>
<span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>文档<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span>
<span class="language-xml">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span>
<span class="language-css"><span class="language-xml">      <span class="selector-tag">div</span> &#123;</span></span>
<span class="language-css"><span class="language-xml">        <span class="attribute">width</span>: <span class="number">200px</span>;</span></span>
<span class="language-css"><span class="language-xml">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span>
<span class="language-css"><span class="language-xml">        <span class="attribute">background-color</span>: <span class="number">#b8b5ff</span>;</span></span>
<span class="language-css"><span class="language-xml">      &#125;</span></span>
<span class="language-css"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span>
<span class="language-xml">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span>
<span class="language-xml">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span>
<span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>
<span class="language-xml">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span>
<span class="language-javascript"><span class="language-xml">      <span class="keyword">const</span> el = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;item&#x27;</span>)</span></span>
<span class="language-javascript"><span class="language-xml">      <span class="comment">// 鼠标移入</span></span></span>
<span class="language-javascript"><span class="language-xml">      el.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mouseover&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span>
<span class="language-javascript"><span class="language-xml">        el.<span class="property">style</span>.<span class="property">background</span> = <span class="string">&#x27;#ffefa1&#x27;</span></span></span>
<span class="language-javascript"><span class="language-xml">      &#125;)</span></span>
<span class="language-javascript"><span class="language-xml">      <span class="comment">// 鼠标移出</span></span></span>
<span class="language-javascript"><span class="language-xml">      el.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mouseout&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span>
<span class="language-javascript"><span class="language-xml">        el.<span class="property">style</span>.<span class="property">background</span> = <span class="string">&#x27;#b8b5ff&#x27;</span></span></span>
<span class="language-javascript"><span class="language-xml">      &#125;)</span></span>
<span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span>
<span class="language-xml">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span>
<span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></code></pre>



<h2 id="键盘事件"><a href="#键盘事件" class="headerlink" title="键盘事件"></a>键盘事件</h2><p>常用的键盘事件有以下两个：</p>
<table>
<thead>
<tr>
<th>事件</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>keydown</code></td>
<td>键盘按下会触发的事件</td>
</tr>
<tr>
<td><code>keyup</code></td>
<td>键盘松开会触发的事件</td>
</tr>
</tbody></table>
<pre><code class="highlight js">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;
<span class="language-xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span></span>
<span class="language-xml">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span>
<span class="language-xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span>
<span class="language-xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span>
<span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>文档<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span>
<span class="language-xml">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span>
<span class="language-xml">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span>
<span class="language-xml">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;请输入内容&quot;</span> <span class="attr">id</span>=<span class="string">&quot;phone&quot;</span> /&gt;</span></span>
<span class="language-xml">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span>
<span class="language-javascript"><span class="language-xml">      <span class="keyword">const</span> el = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;phone&#x27;</span>)</span></span>
<span class="language-javascript"><span class="language-xml">      <span class="comment">// 键盘按下</span></span></span>
<span class="language-javascript"><span class="language-xml">      el.<span class="title function_">addEventListener</span>(<span class="string">&#x27;keydown&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span>
<span class="language-javascript"><span class="language-xml">        el.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;#00adb5&#x27;</span></span></span>
<span class="language-javascript"><span class="language-xml">      &#125;)</span></span>
<span class="language-javascript"><span class="language-xml">      <span class="comment">// 键盘松开</span></span></span>
<span class="language-javascript"><span class="language-xml">      el.<span class="title function_">addEventListener</span>(<span class="string">&#x27;keyup&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span>
<span class="language-javascript"><span class="language-xml">        el.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;#000000&#x27;</span></span></span>
<span class="language-javascript"><span class="language-xml">      &#125;)</span></span>
<span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span>
<span class="language-xml">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span>
<span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></code></pre>



<h2 id="表单事件"><a href="#表单事件" class="headerlink" title="表单事件"></a>表单事件</h2><p>在 JavaScript 中，常用表单事件如下表所示：</p>
<table>
<thead>
<tr>
<th>事件</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>focus</code></td>
<td>表单元素聚焦时触发的事件</td>
</tr>
<tr>
<td><code>blur</code></td>
<td>表单元素失焦时触发的事件</td>
</tr>
</tbody></table>
<pre><code class="highlight html"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span>
<span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span>
  <span class="tag">&lt;<span class="name">head</span>&gt;</span>
    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span>
    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span>
    <span class="tag">&lt;<span class="name">title</span>&gt;</span>文档<span class="tag">&lt;/<span class="name">title</span>&gt;</span>
  <span class="tag">&lt;/<span class="name">head</span>&gt;</span>
  <span class="tag">&lt;<span class="name">body</span>&gt;</span>
    姓名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;输入你的名字&quot;</span> /&gt;</span>
    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript">      <span class="keyword">const</span> el = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;username&#x27;</span>)</span>
<span class="language-javascript">      <span class="comment">// 当聚焦到该输入框时，把输入框的内容置为空，并设置字体颜色为蓝色</span></span>
<span class="language-javascript">      el.<span class="title function_">addEventListener</span>(<span class="string">&#x27;focus&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span>
<span class="language-javascript">        <span class="keyword">if</span> (el.<span class="property">value</span> == <span class="string">&#x27;输入你的名字&#x27;</span>) &#123;</span>
<span class="language-javascript">          el.<span class="property">value</span> = <span class="string">&#x27;&#x27;</span></span>
<span class="language-javascript">        &#125;</span>
<span class="language-javascript">        el.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;#77acf1&#x27;</span></span>
<span class="language-javascript">      &#125;)</span>
<span class="language-javascript">      <span class="comment">// 当失去焦点时，显示输入框的默认内容</span></span>
<span class="language-javascript">      el.<span class="title function_">addEventListener</span>(<span class="string">&#x27;blur&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span>
<span class="language-javascript">        <span class="keyword">if</span> (el.<span class="property">value</span> == <span class="string">&#x27;&#x27;</span>) &#123;</span>
<span class="language-javascript">          el.<span class="property">value</span> = <span class="string">&#x27;输入你的名字&#x27;</span></span>
<span class="language-javascript">        &#125;</span>
<span class="language-javascript">        el.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;#000000&#x27;</span></span>
<span class="language-javascript">      &#125;)</span>
<span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>
  <span class="tag">&lt;/<span class="name">body</span>&gt;</span>
<span class="tag">&lt;/<span class="name">html</span>&gt;</span></code></pre>

<h2 id="事件对象"><a href="#事件对象" class="headerlink" title="事件对象"></a>事件对象</h2><p>事件函数默认能接受到一个可选参数：事件对象，通过事件对象可以得到更多关于该类型事件的信息。例如鼠标事件可以拿到鼠标的位置坐标，键盘事件能拿到对应按下的键。</p>
<pre><code class="highlight html"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span>
<span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span>
  <span class="tag">&lt;<span class="name">head</span>&gt;</span>
    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span>
    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span>
    <span class="tag">&lt;<span class="name">title</span>&gt;</span>文档<span class="tag">&lt;/<span class="name">title</span>&gt;</span>
  <span class="tag">&lt;/<span class="name">head</span>&gt;</span>
  <span class="tag">&lt;<span class="name">body</span>&gt;</span>
    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;按钮&quot;</span> /&gt;</span>
    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript">      <span class="keyword">const</span> el = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn&#x27;</span>)</span>
<span class="language-javascript">      el.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params">ev</span>) &#123;</span>
<span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`这是一个 <span class="subst">$&#123;ev.type&#125;</span> 事件`</span>) <span class="comment">// 在控制台打印事件类型</span></span>
<span class="language-javascript">      &#125;)</span>
<span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>
  <span class="tag">&lt;/<span class="name">body</span>&gt;</span>
<span class="tag">&lt;/<span class="name">html</span>&gt;</span></code></pre>

<h2 id="鼠标事件对象"><a href="#鼠标事件对象" class="headerlink" title="鼠标事件对象"></a>鼠标事件对象</h2><p>鼠标事件处理函数接收到的<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent">鼠标事件对象</a>还包含一些其它属性：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>button</code></td>
<td>触发鼠标事件时按下的按钮</td>
</tr>
<tr>
<td><code>clientX</code></td>
<td>鼠标指针在窗口可视区域中的 X 坐标</td>
</tr>
<tr>
<td><code>clientY</code></td>
<td>鼠标指针在窗口可视区域中的 Y 坐标</td>
</tr>
<tr>
<td><code>pageX</code></td>
<td>鼠标指针相对于整个页面的 X 坐标（考虑滚动条）</td>
</tr>
<tr>
<td><code>pageY</code></td>
<td>鼠标指针相对于整个页面的 Y 坐标（考虑滚动条）</td>
</tr>
<tr>
<td><code>movementX</code></td>
<td>鼠标指针相对于上次 <code>mousemove</code> 事件位置的 X 坐标</td>
</tr>
<tr>
<td><code>movementY</code></td>
<td>鼠标指针相对于上次 <code>mousemove</code> 事件位置的 Y 坐标</td>
</tr>
</tbody></table>
<p>参考以下示例：</p>
<pre><code class="highlight html"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span>
<span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span>
  <span class="tag">&lt;<span class="name">head</span>&gt;</span>
    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span>
    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span>
    <span class="tag">&lt;<span class="name">title</span>&gt;</span>文档<span class="tag">&lt;/<span class="name">title</span>&gt;</span>
    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span>
<span class="language-css">      <span class="selector-tag">div</span> &#123;</span>
<span class="language-css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span>
<span class="language-css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span>
<span class="language-css">        <span class="attribute">background-color</span>: <span class="number">#b8b5ff</span>;</span>
<span class="language-css">      &#125;</span>
<span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span>
  <span class="tag">&lt;/<span class="name">head</span>&gt;</span>
  <span class="tag">&lt;<span class="name">body</span>&gt;</span>
    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>
    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript">      <span class="keyword">const</span> el = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;item&#x27;</span>)</span>
<span class="language-javascript">      el.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params">ev</span>) &#123;</span>
<span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;页面中鼠标指针的 X 坐标：&#x27;</span>, ev.<span class="property">pageX</span>)</span>
<span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;页面中鼠标指针的 Y 坐标：&#x27;</span>, ev.<span class="property">pageY</span>)</span>
<span class="language-javascript">      &#125;)</span>
<span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>
  <span class="tag">&lt;/<span class="name">body</span>&gt;</span>
<span class="tag">&lt;/<span class="name">html</span>&gt;</span></code></pre>

<h2 id="键盘事件对象"><a href="#键盘事件对象" class="headerlink" title="键盘事件对象"></a>键盘事件对象</h2><p>键盘事件处理函数接收到的<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent">键盘事件对象</a>包含一些按键信息相关的属性：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>code</code></td>
<td>键盘上的按键的代码值</td>
</tr>
<tr>
<td><code>key</code></td>
<td>按键产生的字符（考虑大小写）</td>
</tr>
<tr>
<td><code>shiftKey</code></td>
<td>是否按下 Shift 键</td>
</tr>
<tr>
<td><code>ctrlkey</code></td>
<td>是否按下 Ctrl 键</td>
</tr>
<tr>
<td><code>altkey</code></td>
<td>是否按下 Alt 键</td>
</tr>
</tbody></table>
<p>参考以下示例：</p>
<pre><code class="highlight html"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span>
<span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span>
  <span class="tag">&lt;<span class="name">head</span>&gt;</span>
    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span>
    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span>
    <span class="tag">&lt;<span class="name">title</span>&gt;</span>文档<span class="tag">&lt;/<span class="name">title</span>&gt;</span>
  <span class="tag">&lt;/<span class="name">head</span>&gt;</span>
  <span class="tag">&lt;<span class="name">body</span>&gt;</span>
    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;item&quot;</span> /&gt;</span>
    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;msg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span>
    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript">      <span class="keyword">const</span> el = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;item&#x27;</span>)</span>
<span class="language-javascript">      el.<span class="title function_">addEventListener</span>(<span class="string">&#x27;keydown&#x27;</span>, <span class="keyword">function</span> (<span class="params">ev</span>) &#123;</span>
<span class="language-javascript">        <span class="comment">// 判断是否按下 Ctrl 键</span></span>
<span class="language-javascript">        <span class="keyword">if</span> (ev.<span class="property">ctrlKey</span>) &#123;</span>
<span class="language-javascript">          msg.<span class="property">innerHTML</span> = <span class="string">&#x27;请不要按下 Ctrl 键&#x27;</span></span>
<span class="language-javascript">          msg.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;red&#x27;</span></span>
<span class="language-javascript">        &#125; <span class="keyword">else</span> &#123;</span>
<span class="language-javascript">          <span class="comment">// 当没有按下 Ctrl 键时，输出按键产生的字符</span></span>
<span class="language-javascript">          msg.<span class="property">innerHTML</span> = <span class="string">&#x27;按键产生的字符：&#x27;</span> + ev.<span class="property">key</span></span>
<span class="language-javascript">          msg.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;black&#x27;</span></span>
<span class="language-javascript">        &#125;</span>
<span class="language-javascript">      &#125;)</span>
<span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>
  <span class="tag">&lt;/<span class="name">body</span>&gt;</span>
<span class="tag">&lt;/<span class="name">html</span>&gt;</span></code></pre>

<h1 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h1><p><strong>AJAX</strong> 的英文全称为 <strong>Asynchronous JavaScript And XML</strong>，其中 <strong>Asynchronous</strong> 是异步的意思。</p>
<p>何为异步呢？它是指通过 AJAX 向服务器请求数据，在不刷新整个页面的情况下，更新页面上的部分内容。</p>
<p>其工作原理图如下所示：</p>
<p><img src="https://doc.shiyanlou.com/courses/3773/1347963/1389bcd14fc2ba77b5f8343420f96304-0" alt="图片描述"></p>
<p>使用<code>AJAX</code>请求的功能如果餐厅中的服务员，能在不阻塞主要流程的情况下，让服务员帮你去做某件事情。如果这件事情你自己去做的话，就会阻塞你的事件进程了。</p>
<p>常用的三种<code>AJAX</code>:</p>
<ul>
<li>XMLHttpRequest API</li>
<li>Fetch API</li>
<li>Axios</li>
</ul>
<h2 id="XMLHttpRequest-API"><a href="#XMLHttpRequest-API" class="headerlink" title="XMLHttpRequest API"></a>XMLHttpRequest API</h2><p>为了通过 AJAX 异步请求数据，一种传统的方法是使用 XMLHttpRequest API。</p>
<p>创建 AJAX 的基本步骤如下：</p>
<ol>
<li><strong>创建 <code>XMLHttpRequest</code> 对象</strong></li>
</ol>
<pre><code class="highlight js"><span class="keyword">const</span> httpRequest = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</code></pre>

<ol start="2">
<li><strong>向服务器发送请求</strong></li>
</ol>
<pre><code class="highlight js"><span class="comment">// 规定发送请求的一些要求</span>
httpRequest.<span class="title function_">open</span>(method, url, <span class="keyword">async</span>)
<span class="comment">// 将请求发送到服务器</span>
httpRequest.<span class="title function_">send</span>()</code></pre>

<p><code>open()</code> 方法中的参数说明如下：</p>
<ul>
<li><code>method</code>：请求的类型，常见的有 <code>GET</code> 和 <code>POST</code>。</li>
<li><code>url</code>：请求的 URL 地址。</li>
<li><code>async</code>（可选）：设置同步或者异步请求，其值为布尔类型，默认为 <code>true</code>。当为 <code>true</code> 时，使用异步请求；当为 <code>false</code> 时，使用同步请求。</li>
</ul>
<ol start="3">
<li><strong>获取服务器响应状态</strong><br>我们使用 HTTP 请求数据后，会反馈给我们相应的请求状态。我们使用 <code>onreadystatechange</code> 去检查响应的状态，当 <code>httpRequest.readyState</code> 为 4 并且 <code>httpRequest.status</code> 等于 <strong>200</strong> 时，说明数据请求成功。</li>
</ol>
<p>其使用如下：</p>
<pre><code class="highlight js"><span class="comment">// 检查响应的状态</span>
httpRequest.<span class="property">onreadystatechange</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;
  <span class="keyword">if</span> (httpRequest.<span class="property">readyState</span> === <span class="number">4</span>) &#123;
    <span class="keyword">if</span> (httpRequest.<span class="property">status</span> == <span class="number">200</span>) &#123;
      <span class="comment">// 请求成功执行的代码</span>
    &#125; <span class="keyword">else</span> &#123;
      <span class="comment">// 请求失败执行的代码</span>
    &#125;
  &#125;
&#125;</code></pre>

<p>新建一个 <code>index.html</code> 文件，在 <code>&lt;script&gt;</code> 标签内写入以下内容：</p>
<pre><code class="highlight javascript"><span class="keyword">const</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()
<span class="comment">// 规定发送请求的一些要求</span>
xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;https://jsonplaceholder.typicode.com/users&#x27;</span>, <span class="literal">true</span>)
<span class="comment">// 将请求发送到服务器</span>
xhr.<span class="title function_">send</span>()
<span class="comment">// 检查响应的状态</span>
xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;
  <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">readyState</span>)
  <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">status</span>)
  <span class="keyword">if</span> (xhr.<span class="property">readyState</span> === <span class="number">4</span>) &#123;
    <span class="keyword">if</span> (xhr.<span class="property">status</span> == <span class="number">200</span>) &#123;
      <span class="comment">// 请求成功执行的代码</span>
      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;请求成功&#x27;</span>)
      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">parse</span>(xhr.<span class="property">responseText</span>))
    &#125; <span class="keyword">else</span> &#123;
      <span class="comment">// 请求失败执行的代码</span>
      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;请求失败&#x27;</span>)
    &#125;
  &#125;
&#125;</code></pre>

<p>输出结果如下：</p>
<p><img src="https://doc.shiyanlou.com/courses/uid1889095-20241006-1728218852523" alt="图片描述"></p>
<p>在控制台中输出的 <code>200</code> 是 HTTP 的响应状态码，该状态码还有其他取值，可以阅读 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status">HTTP response status codes</a> 了解更多。</p>
<p>而穿插在 <code>200</code> 之后的数字 <code>2</code>、<code>3</code>、<code>4</code> 是 <code>readyState</code> 属性的值，它的取值有以下几种：</p>
<ul>
<li><code>0</code> 代表未初始化请求。</li>
<li><code>1</code> 代表已与服务器建立连接。</li>
<li><code>2</code> 代表请求被接受。</li>
<li><code>3</code> 代表请求中。</li>
<li><code>4</code> 代表请求完成。</li>
</ul>
<h2 id="Fetch-API"><a href="#Fetch-API" class="headerlink" title="Fetch API"></a>Fetch API</h2><p>Fetch API 提供了用于通过网络获取资源的接口，它是 XMLHttpRequest API 的更强大、更灵活的替代品。其使用方式如下：</p>
<pre><code class="highlight js"><span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(url)</code></pre>

<p>其中，<code>fetch()</code> 是一个全局函数，它接收要请求的 URL 作为参数，并返回一个 <code>Promise</code> 对象。</p>
<p>该异步操作的结果是一个 <code>Response</code> 对象，我们可以使用 <code>await</code> 关键字获取。它提供了多种方法来解析不同格式的正文内容：</p>
<ul>
<li><code>arrayBuffer()</code>：二进制数据。</li>
<li><code>blob()</code>：二进制数据。</li>
<li><code>formData()</code>：HTML 表单数据。</li>
<li><code>json()</code>：JSON 格式数据。</li>
<li><code>text()</code>：纯文本数据。</li>
</ul>
<p>下面是一个基本的使用示例：</p>
<pre><code class="highlight js"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params"></span>) &#123;
  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://jsonplaceholder.typicode.com/users&#x27;</span>)
  <span class="keyword">if</span> (!response.<span class="property">ok</span>) &#123;
    <span class="comment">// 请求失败执行的代码</span>
    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;请求失败&#x27;</span>)
  &#125; <span class="keyword">else</span> &#123;
    <span class="comment">// 请求成功执行的代码</span>
    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;请求成功&#x27;</span>)
    <span class="keyword">const</span> json = <span class="keyword">await</span> response.<span class="title function_">json</span>()
    <span class="variable language_">console</span>.<span class="title function_">log</span>(json)
  &#125;
&#125;
<span class="title function_">getData</span>()</code></pre>

<p>默认情况下，<code>fetch()</code> 发出 GET 请求，但我们可以使用 <code>method</code> 选项来使用不同的请求方式：</p>
<pre><code class="highlight js"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params"></span>) &#123;
  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://jsonplaceholder.typicode.com/posts&#x27;</span>, &#123;
    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,
    <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">title</span>: <span class="string">&#x27;foo&#x27;</span>, <span class="attr">body</span>: <span class="string">&#x27;bar&#x27;</span>, <span class="attr">userId</span>: <span class="number">1</span> &#125;),
    <span class="attr">headers</span>: &#123; <span class="string">&#x27;Content-type&#x27;</span>: <span class="string">&#x27;application/json; charset=UTF-8&#x27;</span> &#125;,
  &#125;)

  <span class="keyword">if</span> (!response.<span class="property">ok</span>) &#123;
    <span class="comment">// 请求失败执行的代码</span>
    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;请求失败&#x27;</span>)
  &#125; <span class="keyword">else</span> &#123;
    <span class="comment">// 请求成功执行的代码</span>
    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;请求成功&#x27;</span>)
    <span class="keyword">const</span> json = <span class="keyword">await</span> response.<span class="title function_">json</span>()
    <span class="variable language_">console</span>.<span class="title function_">log</span>(json)
  &#125;
&#125;
<span class="title function_">getData</span>()</code></pre>

<p>在上面的代码中：</p>
<ul>
<li><code>method</code> 选项用于设置请求方式。</li>
<li><code>body</code> 选项用于设置发送到服务器的内容。</li>
<li><code>headers</code> 选项用于设置 HTTP 请求头。</li>
</ul>
<h2 id="Axios"><a href="#Axios" class="headerlink" title="Axios"></a>Axios</h2><p>一个非常主流的<code>AJAX</code>的封装插件—— <code>Axios</code>。</p>
<p><a target="_blank" rel="noopener" href="http://www.axios-js.com/">Axios</a> 是一个基于 Promise 语法的、用于浏览器和 Node.js 的 HTTP 库。简单的理解就是对 AJAX 的封装，且具有易用、简洁、高效等特点。</p>
<p>它本身具备以下功能：</p>
<ol>
<li>可以从浏览器中创建 XMLHttpRequest。</li>
<li>能从 Node.js 创建 HTTP 请求。</li>
<li>支持 Promise API。</li>
<li>能够拦截请求和响应。</li>
<li>可以转换请求和响应数据。</li>
<li>可以取消请求。</li>
<li>可以自动转换 JSON 数据。</li>
<li>在客户端支持防止 <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0">CSRF&#x2F;XSRF</a> 攻击。</li>
</ol>
<p>为了使用 Axios，我们需要使用 <code>&lt;script&gt;</code> 标签进行引入：</p>
<pre><code class="highlight html"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/axios@1.7.7/dist/axios.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></code></pre>

<p>新建一个 <code>test.json</code> 文件，并写入以下数据，作为接下来使用 Axios 请求的数据文件：</p>
<pre><code class="highlight json"><span class="punctuation">&#123;</span>
  <span class="attr">&quot;msg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Hello Axios!&quot;</span>
<span class="punctuation">&#125;</span></code></pre>

<p>新建一个 <code>index.html</code> 文件，写入以下内容：</p>
<pre><code class="highlight html"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span>
<span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span>
  <span class="tag">&lt;<span class="name">head</span>&gt;</span>
    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span>
    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span>
    <span class="tag">&lt;<span class="name">title</span>&gt;</span>文档<span class="tag">&lt;/<span class="name">title</span>&gt;</span>
    <span class="comment">&lt;!-- 引入 Axios 的 CDN --&gt;</span>
    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/axios@1.7.7/dist/axios.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>
  <span class="tag">&lt;/<span class="name">head</span>&gt;</span>
  <span class="tag">&lt;<span class="name">body</span>&gt;</span>
    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript">      axios.<span class="title function_">get</span>(<span class="string">&#x27;./test.json&#x27;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span>
<span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span>
<span class="language-javascript">      &#125;)</span>
<span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>
  <span class="tag">&lt;/<span class="name">body</span>&gt;</span>
<span class="tag">&lt;/<span class="name">html</span>&gt;</span></code></pre>

<p>在上面代码中，我们使用 <strong>Axios</strong> 发送一个简单的 <strong>AJAX</strong> 请求，用于获取 <code>test.json</code> 中的数据，并输出在控制台。</p>
<p>可以看到，通过 Axios 获取到的数据实际上是一个对象，真正需要的数据是该对象的 <code>data</code> 属性值。</p>
<p>上面这个例子只是 Axios 众多使用方式中的一种，它主要是用于执行 GET 请求。</p>
<p>下面我们看几个它比较常用的使用方式：</p>
<ol>
<li>执行 GET 数据请求：</li>
</ol>
<pre><code class="highlight js">axios
  .<span class="title function_">get</span>(<span class="string">&#x27;url&#x27;</span>, &#123;
    <span class="attr">params</span>: &#123;
      <span class="attr">id</span>: <span class="string">&#x27;接口配置参数（相当于url?id=xxxx）&#x27;</span>,
    &#125;,
  &#125;)
  .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">res</span>) &#123;
    <span class="variable language_">console</span>.<span class="title function_">log</span>(res) <span class="comment">// 处理成功的函数 相当于 success</span>
  &#125;)
  .<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">error</span>) &#123;
    <span class="variable language_">console</span>.<span class="title function_">log</span>(error) <span class="comment">// 错误处理 相当于 error</span>
  &#125;)</code></pre>

<ol start="2">
<li>执行 POST 数据请求并发送数据给后端：</li>
</ol>
<pre><code class="highlight js">axios
  .<span class="title function_">post</span>(
    <span class="string">&#x27;url&#x27;</span>,
    &#123; <span class="attr">data</span>: &#123;&#125; &#125;,
    &#123;
      <span class="attr">headers</span>: <span class="string">&#x27;xxxx&#x27;</span>, <span class="comment">// 头部配置</span>
    &#125;
  )
  .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">res</span>) &#123;
    <span class="variable language_">console</span>.<span class="title function_">log</span>(res) <span class="comment">// 处理成功的函数 相当于 success</span>
  &#125;)
  .<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">error</span>) &#123;
    <span class="variable language_">console</span>.<span class="title function_">log</span>(error) <span class="comment">// 错误处理 相当于 error</span>
  &#125;)</code></pre>

<ol start="3">
<li>通用方式（适用于任何请求方式）：</li>
</ol>
<pre><code class="highlight js"><span class="comment">//-------- GET --------//</span>
<span class="title function_">axios</span>(&#123;
  <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,
  <span class="attr">url</span>: <span class="string">&#x27;xxx&#x27;</span>,
  <span class="attr">cache</span>: <span class="literal">false</span>,
  <span class="attr">params</span>: &#123;
    <span class="attr">id</span>: <span class="number">123</span>,
  &#125;,
  <span class="attr">headers</span>: <span class="string">&#x27;xxx&#x27;</span>,
&#125;)
<span class="comment">//-------- POST --------//</span>
<span class="title function_">axios</span>(&#123;
  <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,
  <span class="attr">url</span>: <span class="string">&#x27;xxx&#x27;</span>,
  <span class="attr">data</span>: &#123;
    <span class="attr">firstName</span>: <span class="string">&#x27;Tom&#x27;</span>,
    <span class="attr">lastName</span>: <span class="string">&#x27;Sun&#x27;</span>,
  &#125;,
&#125;)</code></pre>

<p>其中需要注意的是，GET 和 POST 请求中向后端传递参数的配置项名字不同：GET 请求需要使用 <code>params</code>，POST 请求需要使用 <code>data</code> 发送数据。</p>
<p>作为一个独立的强大的 HTTP 库，Axios 的功能远不止这些，可以通过 <a target="_blank" rel="noopener" href="http://www.axios-js.com/">Axios 的官网</a>学习。</p>

    </div>
    <div id="menu-container">
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#BOM-%E6%93%8D%E4%BD%9C"><span class="toc-text">BOM 操作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E6%93%8D%E4%BD%9C"><span class="toc-text">用户操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E7%AA%97%E5%8F%A3%E5%B0%BA%E5%AF%B8"><span class="toc-text">获取窗口尺寸</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%B1%8F%E5%B9%95%E5%B0%BA%E5%AF%B8"><span class="toc-text">获取屏幕尺寸</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Location-%E5%AF%B9%E8%B1%A1"><span class="toc-text">Location 对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#History-%E5%AF%B9%E8%B1%A1"><span class="toc-text">History 对象</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#DOM-%E6%93%8D%E4%BD%9C"><span class="toc-text">DOM 操作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84-DOM-%E5%B1%9E%E6%80%A7"><span class="toc-text">常用的 DOM 属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84-DOM-%E6%96%B9%E6%B3%95"><span class="toc-text">常用的 DOM 方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC-DOM-%E6%93%8D%E4%BD%9C"><span class="toc-text">基本 DOM 操作</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9A%E6%97%B6%E5%99%A8"><span class="toc-text">定时器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E6%AC%A1%E6%80%A7%E5%AE%9A%E6%97%B6%E5%99%A8"><span class="toc-text">一次性定时器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8D%E5%A4%8D%E5%AE%9A%E6%97%B6%E5%99%A8"><span class="toc-text">重复定时器</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8"><span class="toc-text">本地存储</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#localStorage-API"><span class="toc-text">localStorage API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E6%95%B0%E6%8D%AE"><span class="toc-text">存储数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="toc-text">读取数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-text">删除数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B8%85%E7%A9%BA%E6%95%B0%E6%8D%AE"><span class="toc-text">清空数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sessionStorage-API"><span class="toc-text">sessionStorage API</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86"><span class="toc-text">事件处理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#DOM-0-%E7%BA%A7%E4%BA%8B%E4%BB%B6"><span class="toc-text">DOM 0 级事件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DOM-2-%E7%BA%A7%E4%BA%8B%E4%BB%B6"><span class="toc-text">DOM 2 级事件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%BC%A0%E6%A0%87%E4%BA%8B%E4%BB%B6"><span class="toc-text">鼠标事件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#click-%E4%BA%8B%E4%BB%B6"><span class="toc-text">click 事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mousedown%E3%80%81mouseup-%E4%BA%8B%E4%BB%B6"><span class="toc-text">mousedown、mouseup 事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mouseover%E3%80%81mouseout-%E4%BA%8B%E4%BB%B6"><span class="toc-text">mouseover、mouseout 事件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%94%AE%E7%9B%98%E4%BA%8B%E4%BB%B6"><span class="toc-text">键盘事件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8%E5%8D%95%E4%BA%8B%E4%BB%B6"><span class="toc-text">表单事件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1"><span class="toc-text">事件对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%BC%A0%E6%A0%87%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1"><span class="toc-text">鼠标事件对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%94%AE%E7%9B%98%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1"><span class="toc-text">键盘事件对象</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#AJAX"><span class="toc-text">AJAX</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#XMLHttpRequest-API"><span class="toc-text">XMLHttpRequest API</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Fetch-API"><span class="toc-text">Fetch API</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Axios"><span class="toc-text">Axios</span></a></li></ol></li></ol>
</div>
</div>

</body>
</html>